<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cat Facts</title>
  <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.min.js"></script>
</head>
<body>
  <div id="app">
    <h1>ğŸ± çŒ«ã®è±†çŸ¥è­˜</h1>
    <p v-if="loading">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
    <p v-else-if="error">{{ error }}</p>
    <p v-else>{{ catFact }}</p>
    <button @click="fetchCatFact">æ–°ã—ã„è±†çŸ¥è­˜ã‚’è¡¨ç¤º</button>
  </div>

  <script>
    const { createApp } = Vue;

    createApp({
      data() {
        return {
          catFact: '',
          loading: false,
          error: null,
        };
      },
      methods: {
        async fetchCatFact() {
          this.loading = true;
          this.error = null;
          this.catFact = '';

          try {
            const response = await fetch('https://catfact.ninja/facts');
            if (!response.ok) {
              throw new Error('ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
            }

            const data = await response.json();
            const facts = data.data;

            if (facts && facts.length > 0) {
              // ãƒ©ãƒ³ãƒ€ãƒ ãªè±†çŸ¥è­˜ã‚’å–å¾—
              const randomFact = facts[Math.floor(Math.random() * facts.length)];
              this.catFact = randomFact.fact;
            } else {
              this.error = 'è±†çŸ¥è­˜ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚';
            }
          } catch (err) {
            this.error = err.message;
          } finally {
            this.loading = false;
          }
        },
      },
      mounted() {
        // åˆå›ãƒ­ãƒ¼ãƒ‰æ™‚ã«è±†çŸ¥è­˜ã‚’å–å¾—
        this.fetchCatFact();
      },
    }).mount('#app');
  </script>
</body>
</html>
